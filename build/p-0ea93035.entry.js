import{r as e,c as t,h as a,H as i,g as s}from"./p-a7bcab11.js";import{b as n}from"./p-fd260f2d.js";import{c as l}from"./p-59d5148d.js";import{i as c}from"./p-d8201573.js";import"./p-dfe5a97d.js";var r,d,h;!function(e){e.Imperial="imperial",e.Metric="metric"}(r||(r={})),function(e){e.Feet="feet",e.Miles="miles",e.NauticalMiles="nautical miles"}(d||(d={})),function(e){e.Meters="meters",e.Kilometers="kilometers"}(h||(h={}));let u=class{constructor(a){e(this,a),this.arcgisHubMapWidgetDrawBufferChanged=t(this,"arcgisHubMapWidgetDrawBufferChanged",7),this.arcgisHubMapWigetDrawBufferReset=t(this,"arcgisHubMapWigetDrawBufferReset",7),this.arcgisHubMapWidgetDrawBufferPanelClosed=t(this,"arcgisHubMapWidgetDrawBufferPanelClosed",7),this.arcgisHubWidgetPanelToggled=t(this,"arcgisHubWidgetPanelToggled",7),this.unit=this.defaultUnitOfMeasurement,this.distance=0,this.status="idle",n(this,"handleInputKeyUp","handleSetPanelRef","handleSetSelectRef","handleSetInputRef","reset")}async componentWillLoad(){const{el:e}=this;this.intl=await c.loadIntlForComponent(e),this.handleVisibleChange()}handleUnitDistanceChanged(){const{arcgisHubMapWidgetDrawBufferChanged:e,unit:t,distance:a}=this;e.emit({distance:a,unit:t})}handleCalciteSelectChange(){const{selectEl:{selectedOption:{value:e}}}=this;this.unit=e.toLowerCase()}handleCalciteInputInput(){const{inputEl:{value:e}}=this;this.distance=+e,this.validateDistance()}handleCalcitePanelDismissedChange(){const{panelEl:{closed:e},arcgisHubMapWidgetDrawBufferPanelClosed:t}=this;e&&t.emit()}handleVisibleChange(){const{visible:e,panelEl:t,arcgisHubWidgetPanelToggled:a}=this;t&&a.emit(!e)}async forceReset(){this.reset()}reset(){const{arcgisHubMapWigetDrawBufferReset:e}=this;this.distance=0,this.unit=this.defaultUnitOfMeasurement,e.emit()}validateDistance(){const{inputEl:{value:e}}=this;this.status=e?"idle":"invalid"}handleInputKeyUp(){this.validateDistance()}handleSetSelectRef(e){e&&(this.selectEl=e)}handleSetInputRef(e){e&&(this.inputEl=e)}handleSetPanelRef(e){e&&(this.panelEl=e)}get defaultSystemOfMesasurement(){const[,e]=window.navigator.language.toLowerCase().split("-");return["us","lr","mm"].includes(e)?r.Imperial:r.Metric}get defaultUnitOfMeasurement(){const{defaultSystemOfMesasurement:e}=this;return e===r.Imperial?d.Feet:h.Meters}get canReset(){const{distance:e,unit:t,defaultUnitOfMeasurement:a}=this;return Boolean(e)||t!==a}get distanceIsInvalid(){const{status:e}=this;return"invalid"===e}renderOptionsGroup(e,t){const{unit:i}=this;return a("calcite-option-group",{label:l(e)},t.map((e=>a("calcite-option",{key:e,selected:i===e},l(e)))))}render(){const{distance:e,distanceIsInvalid:t,intl:s,canReset:n,status:l,visible:c,handleInputKeyUp:u,handleSetSelectRef:o,handleSetInputRef:p,handleSetPanelRef:f,reset:g}=this,m=s.t("panel.heading"),b=s.t("panel.reset"),v=s.t("distance.title"),C=s.t("distance.placeholder"),S=s.t("distance.message"),w=s.t("units.title");return a(i,{"data-element":"widget-draw-buffer"},a("calcite-panel",{closable:!0,closed:!c,dismissed:!c,heading:m,ref:f},a("calcite-action",{disabled:!n,icon:"reset",onClick:g,slot:"header-actions-end",text:b}),a("div",{class:"location-filter"},a("calcite-label",{scale:"l"},v,a("calcite-input",{onKeyUp:u,placeholder:C,ref:p,scale:"l",status:l,type:"number",value:e.toString()}),a("calcite-input-message",{active:t},S)),a("calcite-label",{scale:"l"},w,a("calcite-select",{label:w,ref:o,scale:"l"},this.renderOptionsGroup(r.Metric,Object.values(h)),this.renderOptionsGroup(r.Imperial,Object.values(d)))))))}static get assetsDirs(){return["locales"]}get el(){return s(this)}static get watchers(){return{unit:["handleUnitDistanceChanged"],distance:["handleUnitDistanceChanged"],visible:["handleVisibleChange"]}}};u.style="calcite-panel div{display:grid;gap:0.25rem;padding:1rem;background-color:var(--calcite-ui-foreground-1)}";export{u as arcgis_hub_map_widget_draw_buffer}