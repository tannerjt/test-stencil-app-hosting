import{r as t,h as e,g as o,H as r}from"./p-a7bcab11.js";const s=(t,e)=>{const{height:o,width:r}=e;return`${t.y<o/2?"top":"bottom"}-${t.x<r/2?"left":"right"}`};let n=class{constructor(e){t(this,e)}handlePopoverOpen(t){t.stopPropagation();const{detail:e}=t,o=e.view,r=e.geometry,{left:n,top:i,height:a,width:l}=o.container.getBoundingClientRect();if("polygon"===r.type||"polyline"===r.type){const t=r.extent,e=o.toScreen(t.center);if(e.x<0||e.y<0||e.x>l||e.y>a)return void(this.content=null);this.quadrant=s(e,o);const c=((t,e)=>{const{spatialReference:o}=e;let r=1/0,s=0;const n=("polygon"===e.type?e.rings.flat(1/0):e.paths.flat(1/0)).reduce(((t,e,o)=>{const r=Math.floor(o/2);return t[r]||(t[r]=[]),t[r].push(e),t}),[]);n.forEach(((e,n)=>{const[i,a]=e,l=((t,e)=>{const{x:o,y:r}=t,{x:s,y:n}=e;return Math.sqrt((s-o)**2+(n-r)**2)})({x:i,y:a,spatialReference:o},t);l<r&&(r=l,s=n)}));const[i,a]=n[s];return{x:i,y:a,spatialReference:o}})(((t,e)=>{const{xmin:o,ymin:r,xmax:s,ymax:n,spatialReference:i}=t,a=e.includes("top")?r:n;return{x:e.includes("left")?s:o,y:a,spatialReference:i}})(t,this.quadrant),r),p=o.toScreen(c);this.x=p.x+n,this.y=p.y+i}else if("point"===r.type){const t=o.toScreen(r);this.quadrant=s(t,o),this.x=t.x+n,this.y=t.y+i}this.content=e.render(r.type)}handlePopoverClear(t){t.stopPropagation(),this.content=null}get styles(){const{quadrant:t,x:e,y:o}=this;return{"--top-offset":`${o}px`,"--left-offset":`${e}px`,transform:`${(null==t?void 0:t.includes("right"))?"translateX(-110%)":"translateX(10%)"} ${null==t||t.includes("top"),"translateY(-35%)"}`}}render(){const{styles:t,content:o}=this;return e(r,{style:t},o)}get el(){return o(this)}};n.style=":host{position:absolute;z-index:1;top:var(--top-offset);left:var(--left-offset);transform:var(--transform)}calcite-action{border-width:0px;border-top-width:1px;border-style:solid;border-color:var(--calcite-ui-border-1)}calcite-action:first-of-type{border-width:0px}calcite-action-pad>calcite-action{border-width:0px}";export{n as arcgis_hub_map_popover}